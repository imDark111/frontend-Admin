import{a as ne}from"./chunk-RX47UBEE.js";import{$a as oe,Aa as Y,Ca as q,Ea as J,Fa as K,G as k,Ga as Q,H as w,Hb as ge,I as y,Ja as W,K as D,La as X,Na as Z,O as M,Ra as ee,T,Ya as te,Za as ie,ab as ae,bb as re,db as se,e as S,eb as ce,f as E,h,hb as le,i as f,ib as de,j as O,k as a,l as b,m as P,ma as V,n as x,na as R,o as g,oa as z,p as e,pa as A,q as n,qa as F,r as l,ra as U,s as v,sa as H,t as m,ta as N,u as d,ua as $,v as C,vb as me,w as o,wa as j,x as _,xa as B,y as u,ya as L,yb as ue,za as G}from"./chunk-B4HSYOOP.js";import"./chunk-MWWENCHY.js";import"./chunk-7KGURMOZ.js";import"./chunk-JV5DO3IJ.js";import"./chunk-L3SNWROS.js";import"./chunk-EYYNAE2V.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-G7SWQJ6W.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var _e=(()=>{let c=class c{constructor(t){this.http=t,this.apiUrl=`${te.apiUrl}/dashboard`}obtenerEstadisticas(){return this.http.get(`${this.apiUrl}/estadisticas`)}obtenerReservasProximas(){return this.http.get(`${this.apiUrl}/reservas-proximas`)}obtenerCheckInsHoy(){return this.http.get(`${this.apiUrl}/checkins-hoy`)}obtenerCheckOutsHoy(){return this.http.get(`${this.apiUrl}/checkouts-hoy`)}obtenerTodosCheckIns(){return this.http.get(`${this.apiUrl}/checkins-todos`)}obtenerTodosCheckOuts(){return this.http.get(`${this.apiUrl}/checkouts-todos`)}};c.\u0275fac=function(i){return new(i||c)(E(M))},c.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"});let s=c;return s})();function xe(s,c){if(s&1){let r=v();e(0,"ion-item",8),m("click",function(){h(r);let i=d(3);return f(i.navegarA("/reservas"))}),e(1,"ion-label")(2,"h3"),o(3),n(),e(4,"p"),o(5),n(),e(6,"p"),o(7),n()(),e(8,"ion-badge",51),o(9),n()()}if(s&2){let r=c.$implicit,t=d(3);a(3),_(r.codigoReserva),a(2),u("Depto: ",t.getNumeroDepartamento(r)),a(2),u("Fecha: ",t.formatearFecha(r.fechaInicio)),a(),g("color",r.checkIn.realizado?"success":r.estado==="confirmada"?"warning":"primary"),a(),u(" ",r.checkIn.realizado?"Realizado":r.estado==="confirmada"?"Pendiente":"En Curso"," ")}}function be(s,c){if(s&1&&(e(0,"ion-list"),x(1,xe,10,5,"ion-item",50),n()),s&2){let r=d(2);a(),g("ngForOf",r.todosCheckIns)}}function ve(s,c){s&1&&(e(0,"p",52),o(1,"No hay check-ins programados"),n())}function Ce(s,c){if(s&1){let r=v();e(0,"ion-item",8),m("click",function(){h(r);let i=d(3);return f(i.navegarA("/reservas"))}),e(1,"ion-label")(2,"h3"),o(3),n(),e(4,"p"),o(5),n(),e(6,"p"),o(7),n()(),e(8,"ion-badge",51),o(9),n()()}if(s&2){let r=c.$implicit,t=d(3);a(3),_(r.codigoReserva),a(2),u("Depto: ",t.getNumeroDepartamento(r)),a(2),u("Fecha: ",t.formatearFecha(r.fechaFin)),a(),g("color",r.checkOut.realizado?"success":r.estado==="en-curso"?"warning":"medium"),a(),u(" ",r.checkOut.realizado?"Realizado":r.estado==="en-curso"?"Pendiente":"Completada"," ")}}function ke(s,c){if(s&1&&(e(0,"ion-list"),x(1,Ce,10,5,"ion-item",50),n()),s&2){let r=d(2);a(),g("ngForOf",r.todosCheckOuts)}}function Ie(s,c){s&1&&(e(0,"p",52),o(1,"No hay check-outs programados"),n())}function Se(s,c){if(s&1){let r=v();e(0,"ion-grid")(1,"ion-row")(2,"ion-col",15)(3,"ion-card",16),m("click",function(){h(r);let i=d();return f(i.navegarA("/reservas"))}),e(4,"ion-card-content")(5,"div",17),l(6,"ion-icon",18),n(),e(7,"div",19)(8,"h2"),o(9),n(),e(10,"p"),o(11,"Reservas Activas"),n(),e(12,"small"),o(13),n()()()()(),e(14,"ion-col",15)(15,"ion-card",20),m("click",function(){h(r);let i=d();return f(i.navegarA("/departamentos"))}),e(16,"ion-card-content")(17,"div",17),l(18,"ion-icon",21),n(),e(19,"div",19)(20,"h2"),o(21),n(),e(22,"p"),o(23,"Departamentos Disponibles"),n(),e(24,"small"),o(25),n()()()()(),e(26,"ion-col",15)(27,"ion-card",22),m("click",function(){h(r);let i=d();return f(i.navegarA("/facturas"))}),e(28,"ion-card-content")(29,"div",17),l(30,"ion-icon",23),n(),e(31,"div",19)(32,"h2"),o(33),n(),e(34,"p"),o(35,"Ingresos del Mes"),n(),e(36,"small"),o(37),n()()()()(),e(38,"ion-col",15)(39,"ion-card",24)(40,"ion-card-content")(41,"div",17),l(42,"ion-icon",25),n(),e(43,"div",19)(44,"h2"),o(45),n(),e(46,"p"),o(47,"Tasa de Ocupaci\xF3n"),n(),e(48,"small"),o(49,"Del mes actual"),n()()()()()(),e(50,"ion-row")(51,"ion-col",26)(52,"ion-card")(53,"ion-card-header")(54,"ion-card-title"),o(55,"Estado de Departamentos"),n()(),e(56,"ion-card-content")(57,"ion-list")(58,"ion-item"),l(59,"ion-icon",27),e(60,"ion-label"),o(61,"Disponibles"),n(),e(62,"ion-badge",28),o(63),n()(),e(64,"ion-item"),l(65,"ion-icon",29),e(66,"ion-label"),o(67,"Ocupados"),n(),e(68,"ion-badge",30),o(69),n()(),e(70,"ion-item"),l(71,"ion-icon",31),e(72,"ion-label"),o(73,"Mantenimiento"),n(),e(74,"ion-badge",32),o(75),n()()()()()(),e(76,"ion-col",26)(77,"ion-card")(78,"ion-card-header")(79,"ion-card-title"),o(80,"Clientes"),n()(),e(81,"ion-card-content")(82,"ion-list")(83,"ion-item"),l(84,"ion-icon",33),e(85,"ion-label"),o(86,"Total Clientes"),n(),e(87,"ion-badge",34),o(88),n()(),e(89,"ion-item"),l(90,"ion-icon",35),e(91,"ion-label"),o(92,"Clientes Frecuentes"),n(),e(93,"ion-badge",36),o(94),n()(),e(95,"ion-item"),l(96,"ion-icon",37),e(97,"ion-label"),o(98,"Usuarios Registrados"),n(),e(99,"ion-badge",38),o(100),n()()()()()()(),e(101,"ion-row")(102,"ion-col",26)(103,"ion-card")(104,"ion-card-header")(105,"ion-card-title"),o(106),n()(),e(107,"ion-card-content"),x(108,be,2,1,"ion-list",39)(109,ve,2,0,"ng-template",null,0,k),n()()(),e(111,"ion-col",26)(112,"ion-card")(113,"ion-card-header")(114,"ion-card-title"),o(115),n()(),e(116,"ion-card-content"),x(117,ke,2,1,"ion-list",39)(118,Ie,2,0,"ng-template",null,1,k),n()()()(),e(120,"ion-row")(121,"ion-col",40)(122,"ion-card")(123,"ion-card-header")(124,"ion-card-title"),o(125,"Accesos R\xE1pidos"),n()(),e(126,"ion-card-content")(127,"ion-grid")(128,"ion-row")(129,"ion-col",41)(130,"ion-button",42),m("click",function(){h(r);let i=d();return f(i.navegarA("/reservas/crear"))}),l(131,"ion-icon",43),o(132," Nueva Reserva "),n()(),e(133,"ion-col",41)(134,"ion-button",44),m("click",function(){h(r);let i=d();return f(i.navegarA("/departamentos"))}),l(135,"ion-icon",45),o(136," Departamentos "),n()(),e(137,"ion-col",41)(138,"ion-button",46),m("click",function(){h(r);let i=d();return f(i.navegarA("/reportes"))}),l(139,"ion-icon",47),o(140," Reportes "),n()(),e(141,"ion-col",41)(142,"ion-button",48),m("click",function(){h(r);let i=d();return f(i.navegarA("/logs"))}),l(143,"ion-icon",49),o(144," Logs "),n()()()()()()()()()}if(s&2){let r=C(110),t=C(119),i=d();a(9),_(i.estadisticas.reservas.activas),a(4),u("",i.estadisticas.reservas.total," totales"),a(8),_(i.estadisticas.departamentos.disponibles),a(4),u("",i.estadisticas.departamentos.total," totales"),a(8),_(i.formatearMoneda(i.estadisticas.finanzas.ingresosMes)),a(4),u("",i.formatearMoneda(i.estadisticas.finanzas.ingresosTotales)," totales"),a(8),u("",i.estadisticas.tasaOcupacion,"%"),a(18),_(i.estadisticas.departamentos.disponibles),a(6),_(i.estadisticas.departamentos.ocupados),a(6),_(i.estadisticas.departamentos.mantenimiento),a(13),_(i.estadisticas.usuarios.clientes),a(6),_(i.estadisticas.usuarios.frecuentes),a(6),_(i.estadisticas.usuarios.total),a(6),u("Check-ins Programados (",i.todosCheckIns.length,")"),a(2),g("ngIf",i.todosCheckIns.length>0)("ngIfElse",r),a(7),u("Check-outs Programados (",i.todosCheckOuts.length,")"),a(2),g("ngIf",i.todosCheckOuts.length>0)("ngIfElse",t)}}function Ee(s,c){s&1&&(e(0,"div",53),l(1,"ion-spinner",54),e(2,"p"),o(3,"Cargando estad\xEDsticas..."),n()())}var ze=(()=>{let c=class c{constructor(t,i,p){this.dashboardService=t,this.authService=i,this.router=p,this.estadisticas=null,this.checkInsHoy=[],this.checkOutsHoy=[],this.todosCheckIns=[],this.todosCheckOuts=[],this.mostrarTodos=!0,this.loading=!0,this.usuario=null,ie({peopleOutline:ue,bedOutline:se,cashOutline:le,statsChartOutline:ge,calendarOutline:ce,logOutOutline:me,arrowUpOutline:re,arrowDownOutline:ae,checkmarkCircleOutline:de,alertCircleOutline:oe})}ngOnInit(){this.usuario=this.authService.currentUserValue,this.cargarDatos()}cargarDatos(){this.loading=!0,this.dashboardService.obtenerEstadisticas().subscribe({next:t=>{t.success&&t.data&&(this.estadisticas=t.data)},error:t=>console.error("Error al cargar estad\xEDsticas",t)}),this.dashboardService.obtenerCheckInsHoy().subscribe({next:t=>{t.success&&t.data&&(this.checkInsHoy=t.data)},error:t=>console.error("Error al cargar check-ins",t)}),this.dashboardService.obtenerCheckOutsHoy().subscribe({next:t=>{t.success&&t.data&&(this.checkOutsHoy=t.data)},error:t=>console.error("Error al cargar check-outs",t)}),this.dashboardService.obtenerTodosCheckIns().subscribe({next:t=>{t.success&&t.data&&(this.todosCheckIns=t.data)},error:t=>console.error("Error al cargar todos los check-ins",t)}),this.dashboardService.obtenerTodosCheckOuts().subscribe({next:t=>{t.success&&t.data&&(this.todosCheckOuts=t.data),this.loading=!1},error:t=>{console.error("Error al cargar todos los check-outs",t),this.loading=!1}})}handleRefresh(t){this.cargarDatos(),setTimeout(()=>{t.target.complete()},1e3)}formatearMoneda(t){return`$${t.toFixed(2)}`}formatearFecha(t){return t?new Date(t).toLocaleDateString("es-EC",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A"}getNumeroDepartamento(t){return typeof t.departamento=="object"&&t.departamento!==null&&t.departamento.numero||"N/A"}logout(){this.authService.logout(),this.router.navigate(["/login"])}navegarA(t){this.router.navigate([t])}};c.\u0275fac=function(i){return new(i||c)(b(_e),b(ne),b(T))},c.\u0275cmp=P({type:c,selectors:[["app-dashboard"]],decls:17,vars:6,consts:[["noCheckIns",""],["noCheckOuts",""],[3,"translucent"],["color","primary"],["slot","start"],["slot","end"],[1,"avatar-button",3,"click"],[1,"avatar-image",3,"src","alt"],[3,"click"],["name","log-out-outline"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"dashboard-container","ion-padding"],[4,"ngIf"],["class","loading-container ion-text-center ion-padding",4,"ngIf"],["size","12","size-md","6","size-lg","3"],[1,"stat-card","reservas-card",3,"click"],[1,"stat-icon"],["name","calendar-outline"],[1,"stat-info"],[1,"stat-card","departamentos-card",3,"click"],["name","bed-outline"],[1,"stat-card","ingresos-card",3,"click"],["name","cash-outline"],[1,"stat-card","ocupacion-card"],["name","stats-chart-outline"],["size","12","size-lg","6"],["name","checkmark-circle-outline","color","success","slot","start"],["color","success","slot","end"],["name","bed-outline","color","warning","slot","start"],["color","warning","slot","end"],["name","alert-circle-outline","color","danger","slot","start"],["color","danger","slot","end"],["name","people-outline","color","primary","slot","start"],["color","primary","slot","end"],["name","star-outline","color","tertiary","slot","start"],["color","tertiary","slot","end"],["name","person-outline","color","medium","slot","start"],["color","medium","slot","end"],[4,"ngIf","ngIfElse"],["size","12"],["size","6","size-md","3"],["expand","block",3,"click"],["name","add-outline","slot","start"],["expand","block","color","secondary",3,"click"],["name","bed-outline","slot","start"],["expand","block","color","tertiary",3,"click"],["name","document-text-outline","slot","start"],["expand","block","color","dark",3,"click"],["name","list-outline","slot","start"],[3,"click",4,"ngFor","ngForOf"],["slot","end",3,"color"],[1,"ion-text-center","ion-padding"],[1,"loading-container","ion-text-center","ion-padding"],["name","crescent"]],template:function(i,p){i&1&&(e(0,"ion-header",2)(1,"ion-toolbar",3)(2,"ion-buttons",4),l(3,"ion-menu-button"),n(),e(4,"ion-title"),o(5,"Dashboard - Para\xEDso Verde"),n(),e(6,"ion-buttons",5)(7,"div",6),m("click",function(){return p.navegarA("/perfil")}),l(8,"img",7),n(),e(9,"ion-button",8),m("click",function(){return p.logout()}),l(10,"ion-icon",9),n()()()(),e(11,"ion-content",10)(12,"ion-refresher",11),m("ionRefresh",function(pe){return p.handleRefresh(pe)}),l(13,"ion-refresher-content"),n(),e(14,"div",12),x(15,Se,145,19,"ion-grid",13)(16,Ee,4,0,"div",14),n()()),i&2&&(g("translucent",!0),a(8),g("src",(p.usuario==null?null:p.usuario.fotoPerfil)||"https://ionicframework.com/docs/img/demos/avatar.svg",O)("alt",(p.usuario==null?null:p.usuario.nombre)||"Usuario"),a(3),g("fullscreen",!0),a(4),g("ngIf",p.estadisticas),a(),g("ngIf",p.loading))},dependencies:[D,w,y,$,B,X,Z,z,R,ee,A,U,H,F,j,Q,N,Y,L,G,V,q,J,K,W],styles:[".dashboard-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}.stat-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.stat-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.5rem}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:3rem;opacity:.8}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{flex:1}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:0}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0;font-weight:500}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{opacity:.7;font-size:.8rem}.reservas-card[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:#fff}.departamentos-card[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);color:#fff}.ingresos-card[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);color:#fff}.ocupacion-card[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);color:#fff}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px}.loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-bottom:1rem}.avatar-button[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;cursor:pointer;border:2px solid white;margin-right:8px;transition:transform .2s,box-shadow .2s}.avatar-button[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 2px 8px #0003}.avatar-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.avatar-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}"]});let s=c;return s})();export{ze as DashboardPage};
