import{a as se}from"./chunk-EDTP2DET.js";import{Aa as $,B as M,C as y,Cb as le,D as O,Ea as U,Fa as Y,H as E,I as F,Ia as G,Ja as J,K as R,La as K,Na as Q,Ra as X,T as w,Ta as Z,Va as ee,Z as T,Za as te,_a as ne,aa as N,db as ie,ea as k,eb as oe,h,ha as D,i as x,k as l,l as C,m as P,ma as j,n as b,na as B,o as p,oa as z,p as t,pa as q,pb as re,q as n,qa as L,r as d,ra as V,s as I,sa as H,t as u,u as g,ua as W,w as o,wb as ae,x as _,xa as A,y as v,z as S}from"./chunk-76QKIYJX.js";import"./chunk-MWWENCHY.js";import"./chunk-7KGURMOZ.js";import"./chunk-JV5DO3IJ.js";import"./chunk-L3SNWROS.js";import"./chunk-EYYNAE2V.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-G7SWQJ6W.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function ce(s,c){s&1&&(t(0,"div",17),d(1,"ion-spinner"),n())}function de(s,c){if(s&1){let a=I();t(0,"div",18),d(1,"ion-icon",19),t(2,"h2"),o(3,"No hay reservas"),n(),t(4,"p"),o(5,"No se encontraron reservas con los filtros aplicados"),n(),t(6,"ion-button",3),u("click",function(){h(a);let i=g();return x(i.nuevaReserva())}),d(7,"ion-icon",20),o(8," Nueva Reserva "),n()()}}function me(s,c){if(s&1){let a=I();t(0,"ion-card",3),u("click",function(){let i=h(a).$implicit,r=g(2);return x(r.verDetalle(i.id))}),t(1,"ion-card-header")(2,"div",22)(3,"div")(4,"ion-card-title"),o(5),n(),t(6,"p",23),o(7),n()(),t(8,"ion-badge",24),o(9),n()()(),t(10,"ion-card-content")(11,"div",25)(12,"div",26),d(13,"ion-icon",27),t(14,"span"),o(15),n()(),t(16,"div",26),d(17,"ion-icon",28),t(18,"span"),o(19),n()(),t(20,"div",26),d(21,"ion-icon",29),t(22,"span"),o(23),n()(),t(24,"div",30)(25,"strong"),o(26,"Total:"),n(),t(27,"span",31),o(28),n()()()()()}if(s&2){let a=c.$implicit,e=g(2);l(5),_(a.codigoReserva),l(2),_(e.getNombreCliente(a)),l(),p("color",e.obtenerColorEstado(a.estado)),l(),v(" ",a.estado," "),l(6),v("Depto. ",e.getNumeroDepartamento(a)),l(4),S("",e.formatearFecha(a.fechaInicio)," - ",e.formatearFecha(a.fechaFin)),l(4),v("",a.numeroNoches," noche(s)"),l(5),_(e.formatearMoneda(a.total))}}function pe(s,c){if(s&1&&(t(0,"ion-list"),b(1,me,29,9,"ion-card",21),n()),s&2){let a=g();l(),p("ngForOf",a.reservasFiltradas)}}var Pe=(()=>{let c=class c{constructor(e,i){this.reservaService=e,this.router=i,this.reservas=[],this.reservasFiltradas=[],this.cargando=!1,this.busqueda="",this.estadoFiltro="",te({addOutline:ne,searchOutline:le,filterOutline:re,calendarOutline:oe,bedOutline:ie,moonOutline:ae})}ngOnInit(){this.cargarReservas()}cargarReservas(e){this.cargando=!0,this.reservaService.obtenerReservas().subscribe({next:i=>{i.success&&i.data&&(this.reservas=i.data,this.aplicarFiltros()),this.cargando=!1,e&&e.target.complete()},error:i=>{console.error("Error al cargar reservas:",i),this.cargando=!1,e&&e.target.complete()}})}buscar(e){this.busqueda=e.target.value?.toLowerCase()||"",this.aplicarFiltros()}filtrarPorEstado(e){this.estadoFiltro=e.target.value,this.aplicarFiltros()}aplicarFiltros(){this.reservasFiltradas=this.reservas.filter(e=>{let i=!this.busqueda||e.codigoReserva.toLowerCase().includes(this.busqueda)||typeof e.cliente=="object"&&(e.cliente.nombres+" "+e.cliente.apellidos).toLowerCase().includes(this.busqueda),r=!this.estadoFiltro||e.estado===this.estadoFiltro;return i&&r})}obtenerColorEstado(e){return{pendiente:"warning",confirmada:"primary","en-curso":"success",completada:"medium",cancelada:"danger"}[e]||"medium"}verDetalle(e){this.router.navigate(["/reservas",e])}nuevaReserva(){this.router.navigate(["/reservas/crear"])}formatearFecha(e){return new Date(e).toLocaleDateString("es-EC",{day:"2-digit",month:"2-digit",year:"numeric"})}formatearMoneda(e){return new Intl.NumberFormat("es-EC",{style:"currency",currency:"USD"}).format(e)}getNombreCliente(e){return typeof e.cliente=="object"?`${e.cliente.nombres} ${e.cliente.apellidos}`:"N/A"}getNumeroDepartamento(e){return typeof e.departamento=="object"?e.departamento.numero:"N/A"}};c.\u0275fac=function(i){return new(i||c)(C(se),C(w))},c.\u0275cmp=P({type:c,selectors:[["app-reservas"]],decls:31,vars:5,consts:[["slot","start"],["defaultHref","/dashboard"],["slot","end"],[3,"click"],["name","add-outline"],["placeholder","Buscar por c\xF3digo o cliente...",3,"ionInput","debounce"],["placeholder","Filtrar por estado","interface","popover",3,"ionChange","ngModelChange","ngModel"],["value",""],["value","pendiente"],["value","confirmada"],["value","en-curso"],["value","completada"],["value","cancelada"],["slot","fixed",3,"ionRefresh"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],[1,"empty-state"],["name","calendar-outline","size","large"],["name","add-outline","slot","start"],[3,"click",4,"ngFor","ngForOf"],[1,"card-header-content"],[1,"cliente-nombre"],[3,"color"],[1,"reserva-info"],[1,"info-item"],["name","bed-outline"],["name","calendar-outline"],["name","moon-outline"],[1,"info-item","total"],[1,"precio"]],template:function(i,r){i&1&&(t(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),d(3,"ion-back-button",1),n(),t(4,"ion-title"),o(5,"Reservas"),n(),t(6,"ion-buttons",2)(7,"ion-button",3),u("click",function(){return r.nuevaReserva()}),d(8,"ion-icon",4),n()()(),t(9,"ion-toolbar")(10,"ion-searchbar",5),u("ionInput",function(m){return r.buscar(m)}),n()(),t(11,"ion-toolbar")(12,"ion-select",6),u("ionChange",function(m){return r.filtrarPorEstado(m)}),O("ngModelChange",function(m){return y(r.estadoFiltro,m)||(r.estadoFiltro=m),m}),t(13,"ion-select-option",7),o(14,"Todos"),n(),t(15,"ion-select-option",8),o(16,"Pendiente"),n(),t(17,"ion-select-option",9),o(18,"Confirmada"),n(),t(19,"ion-select-option",10),o(20,"En Curso"),n(),t(21,"ion-select-option",11),o(22,"Completada"),n(),t(23,"ion-select-option",12),o(24,"Cancelada"),n()()()(),t(25,"ion-content")(26,"ion-refresher",13),u("ionRefresh",function(m){return r.cargarReservas(m)}),d(27,"ion-refresher-content"),n(),b(28,ce,2,0,"div",14)(29,de,9,0,"div",15)(30,pe,2,1,"ion-list",16),n()),i&2&&(l(10),p("debounce",300),l(2),M("ngModel",r.estadoFiltro),l(16),p("ngIf",r.cargando),l(),p("ngIf",!r.cargando&&r.reservasFiltradas.length===0),l(),p("ngIf",!r.cargando&&r.reservasFiltradas.length>0))},dependencies:[R,E,F,k,T,N,A,Q,K,W,z,D,$,j,Z,ee,G,U,Y,q,V,H,L,B,X,J],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:80px;color:var(--ion-color-medium);margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--ion-color-dark);margin:10px 0}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin-bottom:20px}ion-card[_ngcontent-%COMP%]{margin:12px;cursor:pointer;transition:transform .2s,box-shadow .2s}ion-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.card-header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.card-header-content[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin-bottom:5px}.card-header-content[_ngcontent-%COMP%]   .cliente-nombre[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-medium);margin:0}.reserva-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.reserva-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.9rem}.reserva-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:1.2rem}.reserva-info[_ngcontent-%COMP%]   .info-item.total[_ngcontent-%COMP%]{margin-top:10px;padding-top:10px;border-top:1px solid var(--ion-color-light);font-size:1rem}.reserva-info[_ngcontent-%COMP%]   .info-item.total[_ngcontent-%COMP%]   .precio[_ngcontent-%COMP%]{color:var(--ion-color-success);font-weight:600;margin-left:auto}.fab-button[_ngcontent-%COMP%]{margin:16px;--border-radius: 12px}ion-select[_ngcontent-%COMP%]{width:100%;max-width:300px;padding:0 16px}"]});let s=c;return s})();export{Pe as ReservasPage};
