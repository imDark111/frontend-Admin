import{a as A}from"./chunk-SPIEZRP7.js";import{Aa as R,Ea as q,Eb as $,Fa as w,H as v,I as C,Ja as B,K as y,La as L,Na as j,Ra as D,Ta as H,Za as N,ea as E,ha as S,k as o,l as h,m as b,ma as U,n as d,o as l,oa as F,p as r,pa as P,q as t,r as m,t as f,u as p,ua as T,w as c,x as g,xa as O,y as I,ya as M,z as x,za as k}from"./chunk-B4HSYOOP.js";import"./chunk-MWWENCHY.js";import"./chunk-7KGURMOZ.js";import"./chunk-JV5DO3IJ.js";import"./chunk-L3SNWROS.js";import"./chunk-EYYNAE2V.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-G7SWQJ6W.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function G(e,n){e&1&&(r(0,"div",6),m(1,"ion-spinner"),t())}function J(e,n){if(e&1&&(r(0,"p"),c(1),t()),e&2){let a=p().$implicit;o(),x("",a.nombres," ",a.apellidos)}}function K(e,n){e&1&&m(0,"ion-icon",13)}function Q(e,n){e&1&&(r(0,"ion-badge",14),c(1,"2FA"),t())}function V(e,n){e&1&&(r(0,"ion-badge",15),c(1,"Inactivo"),t())}function W(e,n){if(e&1&&(r(0,"ion-card")(1,"ion-item")(2,"ion-label")(3,"h2"),c(4),t(),r(5,"p"),c(6),t(),d(7,J,2,2,"p",5),t(),r(8,"div",8)(9,"ion-badge",9),d(10,K,1,0,"ion-icon",10),c(11),t(),d(12,Q,2,0,"ion-badge",11)(13,V,2,0,"ion-badge",12),t()()()),e&2){let a=n.$implicit,i=p(2);o(4),g(a.nombreUsuario),o(2),g(a.email),o(),l("ngIf",a.nombres),o(2),l("color",i.obtenerColorRol(a.rol)),o(),l("ngIf",a.rol==="admin"),o(),I(" ",a.rol," "),o(),l("ngIf",a.twoFactorEnabled),o(),l("ngIf",!a.activo)}}function X(e,n){if(e&1&&(r(0,"ion-list"),d(1,W,14,8,"ion-card",7),t()),e&2){let a=p();o(),l("ngForOf",a.usuariosFiltrados)}}var re=(()=>{let n=class n{constructor(i){this.usuarioService=i,this.usuarios=[],this.usuariosFiltrados=[],this.cargando=!1,this.busqueda="",N({shieldCheckmarkOutline:$})}ngOnInit(){this.cargarUsuarios()}cargarUsuarios(i){this.cargando=!0,this.usuarioService.obtenerUsuarios().subscribe({next:s=>{s.success&&s.data&&(this.usuarios=s.data,this.aplicarFiltros()),this.cargando=!1,i&&i.target.complete()},error:s=>{console.error("Error:",s),this.cargando=!1,i&&i.target.complete()}})}buscar(i){this.busqueda=i.target.value?.toLowerCase()||"",this.aplicarFiltros()}aplicarFiltros(){this.usuariosFiltrados=this.usuarios.filter(i=>!this.busqueda||i.nombreUsuario.toLowerCase().includes(this.busqueda)||i.email.toLowerCase().includes(this.busqueda))}obtenerColorRol(i){return i==="admin"?"danger":"primary"}};n.\u0275fac=function(s){return new(s||n)(h(A))},n.\u0275cmp=b({type:n,selectors:[["app-usuarios"]],decls:13,vars:3,consts:[["slot","start"],["defaultHref","/dashboard"],["placeholder","Buscar usuario...",3,"ionInput","debounce"],["slot","fixed",3,"ionRefresh"],["class","loading-container",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],[4,"ngFor","ngForOf"],["slot","end",1,"badges"],[3,"color"],["name","shield-checkmark-outline",4,"ngIf"],["color","success",4,"ngIf"],["color","medium",4,"ngIf"],["name","shield-checkmark-outline"],["color","success"],["color","medium"]],template:function(s,u){s&1&&(r(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),m(3,"ion-back-button",1),t(),r(4,"ion-title"),c(5,"Usuarios"),t()(),r(6,"ion-toolbar")(7,"ion-searchbar",2),f("ionInput",function(_){return u.buscar(_)}),t()()(),r(8,"ion-content")(9,"ion-refresher",3),f("ionRefresh",function(_){return u.cargarUsuarios(_)}),m(10,"ion-refresher-content"),t(),d(11,G,2,0,"div",4)(12,X,2,1,"ion-list",5),t()),s&2&&(o(7),l("debounce",300),o(4),l("ngIf",u.cargando),o(),l("ngIf",!u.cargando))},dependencies:[y,v,C,E,O,j,L,T,F,S,R,M,k,U,H,q,w,P,B,D],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px}ion-card[_ngcontent-%COMP%]{margin:12px}.badges[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.badges[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;text-transform:uppercase}"]});let e=n;return e})();export{re as UsuariosPage};
