import{a as oe}from"./chunk-VEK3H6YJ.js";import{E,Ea as A,F as S,Fa as H,Ga as G,H as y,I as M,J as O,Ja as J,K as T,La as Y,Na as K,Ra as Q,T as F,Ta as X,Za as Z,_a as ee,db as te,ea as w,h as b,ha as z,hb as ne,i as x,j as I,k as r,l as v,m as P,ma as k,n as h,na as V,o as d,oa as $,p as n,pa as B,q as i,qa as j,r as _,ra as R,s as C,sa as N,t as g,ta as q,u as f,ua as L,w as s,wa as U,x as D,xa as W,xb as ie,y as u}from"./chunk-76QKIYJX.js";import"./chunk-MWWENCHY.js";import"./chunk-7KGURMOZ.js";import"./chunk-JV5DO3IJ.js";import"./chunk-L3SNWROS.js";import"./chunk-EYYNAE2V.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-G7SWQJ6W.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function ae(t,c){t&1&&(n(0,"div",11),_(1,"ion-spinner"),i())}function re(t,c){t&1&&(n(0,"ion-badge",29),s(1,"WiFi"),i())}function ce(t,c){t&1&&(n(0,"ion-badge",29),s(1,"TV"),i())}function le(t,c){t&1&&(n(0,"ion-badge",29),s(1,"A/C"),i())}function se(t,c){t&1&&(n(0,"ion-badge",29),s(1,"Calefacci\xF3n"),i())}function de(t,c){t&1&&(n(0,"ion-badge",29),s(1,"Minibar"),i())}function me(t,c){t&1&&(n(0,"ion-badge",29),s(1,"Caja Fuerte"),i())}function _e(t,c){t&1&&(n(0,"ion-badge",29),s(1,"Balc\xF3n"),i())}function ge(t,c){t&1&&(n(0,"ion-badge",29),s(1,"Vista al Mar"),i())}function pe(t,c){t&1&&(n(0,"ion-badge",29),s(1,"Ba\xF1o Privado"),i())}function fe(t,c){t&1&&(n(0,"ion-badge",29),s(1,"Jacuzzi"),i())}function ue(t,c){t&1&&(n(0,"ion-badge",29),s(1,"Cocina"),i())}function be(t,c){t&1&&(n(0,"ion-badge",29),s(1,"Escritorio"),i())}function xe(t,c){t&1&&(n(0,"ion-badge",29),s(1,"Secador"),i())}function he(t,c){t&1&&(n(0,"ion-badge",29),s(1,"Plancha"),i())}function ve(t,c){t&1&&(n(0,"ion-badge",29),s(1,"Tel\xE9fono"),i())}function Ie(t,c){if(t&1){let a=C();n(0,"ion-col",13)(1,"ion-card",3),g("click",function(){let o=b(a).$implicit,l=f(2);return x(l.verDetalle(o))}),n(2,"img",14),g("error",function(o){b(a);let l=f(2);return x(l.onImageError(o))}),i(),n(3,"ion-card-header")(4,"div",15)(5,"ion-card-title"),s(6),i(),n(7,"ion-badge",16),s(8),i()(),n(9,"p",17),s(10),E(11,"titlecase"),i()(),n(12,"ion-card-content")(13,"div",18)(14,"div",19),_(15,"ion-icon",20),n(16,"span"),s(17),i()(),n(18,"div",19),_(19,"ion-icon",21),n(20,"span"),s(21),i()(),n(22,"div",22),_(23,"ion-icon",23),n(24,"span"),s(25),i()()(),n(26,"div",24),h(27,re,2,0,"ion-badge",25)(28,ce,2,0,"ion-badge",25)(29,le,2,0,"ion-badge",25)(30,se,2,0,"ion-badge",25)(31,de,2,0,"ion-badge",25)(32,me,2,0,"ion-badge",25)(33,_e,2,0,"ion-badge",25)(34,ge,2,0,"ion-badge",25)(35,pe,2,0,"ion-badge",25)(36,fe,2,0,"ion-badge",25)(37,ue,2,0,"ion-badge",25)(38,be,2,0,"ion-badge",25)(39,xe,2,0,"ion-badge",25)(40,he,2,0,"ion-badge",25)(41,ve,2,0,"ion-badge",25),i(),n(42,"div",26)(43,"ion-button",27),g("click",function(o){let l=b(a).$implicit,m=f(2);return x(m.editar(l,o))}),_(44,"ion-icon",28),i()()()()()}if(t&2){let a=c.$implicit,e=f(2);r(2),d("src",e.getImagenPrincipal(a),I)("alt","Departamento "+a.numero),r(4),u("Depto. ",a.numero),r(),d("color",e.obtenerColorEstado(a.estado)),r(),u(" ",a.estado," "),r(2),D(S(11,24,a.tipo)),r(7),u("",a.capacidadPersonas," personas"),r(4),u("",a.numeroCamas," cama(s)"),r(4),u("",e.formatearMoneda(a.precioNoche),"/noche"),r(2),d("ngIf",a.caracteristicas.wifi),r(),d("ngIf",a.caracteristicas.televisor),r(),d("ngIf",a.caracteristicas.aireAcondicionado),r(),d("ngIf",a.caracteristicas.calefaccion),r(),d("ngIf",a.caracteristicas.minibar),r(),d("ngIf",a.caracteristicas.cajaFuerte),r(),d("ngIf",a.caracteristicas.balcon),r(),d("ngIf",a.caracteristicas.vistaAlMar),r(),d("ngIf",a.caracteristicas.banoPrivado),r(),d("ngIf",a.caracteristicas.jacuzzi),r(),d("ngIf",a.caracteristicas.cocina),r(),d("ngIf",a.caracteristicas.escritorio),r(),d("ngIf",a.caracteristicas.secadorPelo),r(),d("ngIf",a.caracteristicas.plancha),r(),d("ngIf",a.caracteristicas.telefono)}}function Pe(t,c){if(t&1&&(n(0,"ion-grid")(1,"ion-row"),h(2,Ie,45,26,"ion-col",12),i()()),t&2){let a=f();r(2),d("ngForOf",a.departamentosFiltrados)}}var we=(()=>{let c=class c{constructor(e,o){this.departamentoService=e,this.router=o,this.departamentos=[],this.departamentosFiltrados=[],this.cargando=!1,this.busqueda="",this.estadoFiltro="",this.tipoFiltro="",Z({addOutline:ee,bedOutline:te,cashOutline:ne,peopleOutline:ie})}ngOnInit(){this.cargarDepartamentos()}ionViewWillEnter(){this.cargarDepartamentos()}cargarDepartamentos(e){this.cargando=!0,this.departamentoService.obtenerDepartamentos().subscribe({next:o=>{o.success&&o.data&&(console.log("\u{1F4E6} Departamentos cargados:",o.data.length),o.data.forEach(l=>{console.log(`Depto ${l.numero}: ${l.imagenes?.length||0} imagen(es)`,l.imagenes)}),this.departamentos=o.data,this.aplicarFiltros()),this.cargando=!1,e&&e.target.complete()},error:o=>{console.error("Error:",o),this.cargando=!1,e&&e.target.complete()}})}aplicarFiltros(){this.departamentosFiltrados=this.departamentos.filter(e=>{let o=!this.busqueda||e.numero.toLowerCase().includes(this.busqueda.toLowerCase())||e.tipo.toLowerCase().includes(this.busqueda.toLowerCase()),l=!this.estadoFiltro||e.estado===this.estadoFiltro,m=!this.tipoFiltro||e.tipo===this.tipoFiltro;return o&&l&&m})}buscar(e){this.busqueda=e.target.value||"",this.aplicarFiltros()}verDetalle(e){let o=e._id||e.id;o&&this.router.navigate(["/departamentos",o])}nuevo(){this.router.navigate(["/departamentos/crear"])}editar(e,o){o.stopPropagation();let l=e._id||e.id;l&&this.router.navigate(["/departamentos",l])}obtenerColorEstado(e){return{disponible:"success",ocupado:"danger",mantenimiento:"warning",reservado:"primary"}[e]||"medium"}formatearMoneda(e){return new Intl.NumberFormat("es-EC",{style:"currency",currency:"USD"}).format(e)}getImagenPrincipal(e){if(console.log(`\u{1F5BC}\uFE0F Obteniendo imagen para Depto ${e.numero}:`,e.imagenes),e.imagenes&&e.imagenes.length>0){console.log(`  \u{1F4CB} Tiene ${e.imagenes.length} imagen(es)`);let l=e.imagenes.find(m=>{let p=m.url&&(m.url.startsWith("http://")||m.url.startsWith("https://"));return console.log(`  \u{1F50D} URL: ${m.url?.substring(0,50)}... - V\xE1lida: ${p}`),p});if(l)return console.log(`  \u2705 Usando imagen: ${l.url}`),l.url;console.log("  \u26A0\uFE0F No se encontr\xF3 ninguna URL v\xE1lida")}else console.log("  \u274C No tiene im\xE1genes");let o="https://placehold.co/400x300/4a90e2/ffffff?text=Depto+"+e.numero;return console.log(`  \u{1F537} Usando placeholder: ${o}`),o}onImageError(e){console.error("Error cargando imagen:",e.target.src),e.target.src="https://placehold.co/400x300/cccccc/666666?text=Sin+Imagen"}};c.\u0275fac=function(o){return new(o||c)(v(oe),v(F))},c.\u0275cmp=P({type:c,selectors:[["app-departamentos"]],decls:19,vars:3,consts:[["slot","start"],["defaultHref","/dashboard"],["slot","end"],[3,"click"],["name","add-outline"],["placeholder","Buscar departamento...",3,"ionInput","debounce"],["slot","fixed",3,"ionRefresh"],["class","loading-container",4,"ngIf"],[4,"ngIf"],["expand","block",1,"fab-button",3,"click"],["name","add-outline","slot","start"],[1,"loading-container"],["size","12","size-md","6","size-lg","4",4,"ngFor","ngForOf"],["size","12","size-md","6","size-lg","4"],[3,"error","src","alt"],[1,"header-content"],[3,"color"],[1,"tipo"],[1,"info-grid"],[1,"info-item"],["name","people-outline"],["name","bed-outline"],[1,"info-item","precio"],["name","cash-outline"],[1,"caracteristicas"],["color","tertiary","class","small-badge",4,"ngIf"],[1,"actions"],["fill","clear","size","small",3,"click"],["slot","icon-only","name","create-outline"],["color","tertiary",1,"small-badge"]],template:function(o,l){o&1&&(n(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),_(3,"ion-back-button",1),i(),n(4,"ion-title"),s(5,"Departamentos"),i(),n(6,"ion-buttons",2)(7,"ion-button",3),g("click",function(){return l.nuevo()}),_(8,"ion-icon",4),i()()(),n(9,"ion-toolbar")(10,"ion-searchbar",5),g("ionInput",function(p){return l.buscar(p)}),i()()(),n(11,"ion-content")(12,"ion-refresher",6),g("ionRefresh",function(p){return l.cargarDepartamentos(p)}),_(13,"ion-refresher-content"),i(),h(14,ae,2,0,"div",7)(15,Pe,3,1,"ion-grid",8),n(16,"ion-button",9),g("click",function(){return l.nuevo()}),_(17,"ion-icon",10),s(18," Nuevo Departamento "),i()()),o&2&&(r(10),d("debounce",300),r(4),d("ngIf",l.cargando),r(),d("ngIf",!l.cargando))},dependencies:[T,y,M,w,W,K,Y,L,$,z,U,G,q,B,R,N,j,V,Q,k,X,A,H,J,O],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px}ion-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s}ion-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}ion-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;object-fit:cover}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header-content[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600}.tipo[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:.9rem;margin-top:4px}.info-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}.info-grid[_ngcontent-%COMP%]   .info-item.precio[_ngcontent-%COMP%]{font-weight:600;color:var(--ion-color-success)}.caracteristicas[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:8px}.caracteristicas[_ngcontent-%COMP%]   .small-badge[_ngcontent-%COMP%]{font-size:.75rem;padding:4px 8px}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:8px;padding-top:8px;border-top:1px solid var(--ion-color-light)}.actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px}.actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.fab-button[_ngcontent-%COMP%]{margin:16px;--border-radius: 12px}"]});let t=c;return t})();export{we as DepartamentosPage};
