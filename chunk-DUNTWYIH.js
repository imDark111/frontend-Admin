import{a as K}from"./chunk-MOWBPYII.js";import{Aa as R,Ea as L,Fa as B,Fb as J,H as I,I as x,Ja as z,K as v,La as N,Na as j,Ra as $,T as O,Ta as k,Za as D,ea as P,fb as H,ha as M,k as a,l as f,m as C,ma as S,n as u,o as m,oa as y,p as t,pa as E,q as n,r as s,t as _,u as h,ua as F,vb as A,w as c,x as b,xa as T,y as d,ya as q,yb as G,za as w}from"./chunk-76QKIYJX.js";import"./chunk-MWWENCHY.js";import"./chunk-7KGURMOZ.js";import"./chunk-JV5DO3IJ.js";import"./chunk-L3SNWROS.js";import"./chunk-EYYNAE2V.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-G7SWQJ6W.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function U(i,r){i&1&&(t(0,"div",6),s(1,"ion-spinner"),n())}function V(i,r){i&1&&(t(0,"ion-badge",14),s(1,"ion-icon",15),c(2," Frecuente "),n())}function W(i,r){if(i&1&&(t(0,"ion-card")(1,"ion-item"),s(2,"ion-icon",8),t(3,"ion-label")(4,"h2"),c(5),n(),t(6,"p"),s(7,"ion-icon",9),c(8),n(),t(9,"p"),s(10,"ion-icon",10),c(11),n(),t(12,"p"),c(13),n()(),t(14,"div",11),u(15,V,3,0,"ion-badge",12),t(16,"p",13),c(17),n()()()()),i&2){let l=r.$implicit,e=h(2);a(5),b(e.getNombreCompleto(l)),a(3),d(" ",l.email),a(3),d(" ",l.telefono),a(2),d("C\xE9dula: ",l.cedula),a(2),m("ngIf",l.esFrecuente),a(2),d("",l.reservasRealizadas," reserva(s)")}}function X(i,r){if(i&1&&(t(0,"ion-list"),u(1,W,18,6,"ion-card",7),n()),i&2){let l=h();a(),m("ngForOf",l.clientesFiltrados)}}var le=(()=>{let r=class r{constructor(e,o){this.clienteService=e,this.router=o,this.clientes=[],this.clientesFiltrados=[],this.cargando=!1,this.busqueda="",D({personOutline:G,mailOutline:A,callOutline:H,starOutline:J})}ngOnInit(){this.cargarClientes()}cargarClientes(e){this.cargando=!0,this.clienteService.obtenerClientes().subscribe({next:o=>{o.success&&o.data&&(this.clientes=o.data,this.aplicarFiltros()),this.cargando=!1,e&&e.target.complete()},error:o=>{console.error("Error:",o),this.cargando=!1,e&&e.target.complete()}})}buscar(e){this.busqueda=e.target.value?.toLowerCase()||"",this.aplicarFiltros()}aplicarFiltros(){this.clientesFiltrados=this.clientes.filter(e=>!this.busqueda||e.nombres.toLowerCase().includes(this.busqueda)||e.apellidos.toLowerCase().includes(this.busqueda)||e.cedula.includes(this.busqueda)||e.email.toLowerCase().includes(this.busqueda))}getNombreCompleto(e){return`${e.nombres} ${e.apellidos}`}};r.\u0275fac=function(o){return new(o||r)(f(K),f(O))},r.\u0275cmp=C({type:r,selectors:[["app-clientes"]],decls:13,vars:3,consts:[["slot","start"],["defaultHref","/dashboard"],["placeholder","Buscar cliente...",3,"ionInput","debounce"],["slot","fixed",3,"ionRefresh"],["class","loading-container",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],[4,"ngFor","ngForOf"],["name","person-outline","slot","start","color","primary"],["name","mail-outline"],["name","call-outline"],["slot","end",1,"badges"],["color","success",4,"ngIf"],[1,"reservas-count"],["color","success"],["name","star-outline"]],template:function(o,p){o&1&&(t(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),s(3,"ion-back-button",1),n(),t(4,"ion-title"),c(5,"Clientes"),n()(),t(6,"ion-toolbar")(7,"ion-searchbar",2),_("ionInput",function(g){return p.buscar(g)}),n()()(),t(8,"ion-content")(9,"ion-refresher",3),_("ionRefresh",function(g){return p.cargarClientes(g)}),s(10,"ion-refresher-content"),n(),u(11,U,2,0,"div",4)(12,X,2,1,"ion-list",5),n()),o&2&&(a(7),m("debounce",300),a(4),m("ngIf",p.cargando),a(),m("ngIf",!p.cargando))},dependencies:[v,I,x,P,T,j,N,F,y,M,R,q,w,S,k,L,B,E,$,z],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px}ion-card[_ngcontent-%COMP%]{margin:12px}ion-item[_ngcontent-%COMP%]{--padding-start: 16px}ion-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;margin-bottom:8px}ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.9rem;color:var(--ion-color-medium);margin:4px 0}ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem}.badges[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:8px}.badges[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.badges[_ngcontent-%COMP%]   .reservas-count[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:var(--ion-color-primary)}"]});let i=r;return i})();export{le as ClientesPage};
