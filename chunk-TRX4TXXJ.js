import{a as te}from"./chunk-VLQAVE7D.js";import{$a as ie,Aa as G,Ca as Y,Ea as q,Fa as J,G as k,Ga as K,Gb as _e,H as P,I as y,Ja as Q,K as D,La as W,Na as X,O as w,Ra as Z,T as M,Ya as ee,Za as ne,ab as oe,bb as ae,db as re,e as S,eb as se,f as E,h as p,hb as ce,i as h,ib as le,k as r,l as b,m as O,ma as T,n as x,na as V,o as u,oa as R,p as e,pa as z,q as n,qa as A,r as l,ra as F,s as v,sa as H,t as m,ta as N,u as d,ua as $,ub as de,v as C,w as o,wa as U,x as g,xa as j,xb as me,y as _,ya as B,za as L}from"./chunk-76QKIYJX.js";import"./chunk-MWWENCHY.js";import"./chunk-7KGURMOZ.js";import"./chunk-JV5DO3IJ.js";import"./chunk-L3SNWROS.js";import"./chunk-EYYNAE2V.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-G7SWQJ6W.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var ge=(()=>{let c=class c{constructor(t){this.http=t,this.apiUrl=`${ee.apiUrl}/dashboard`}obtenerEstadisticas(){return this.http.get(`${this.apiUrl}/estadisticas`)}obtenerReservasProximas(){return this.http.get(`${this.apiUrl}/reservas-proximas`)}obtenerCheckInsHoy(){return this.http.get(`${this.apiUrl}/checkins-hoy`)}obtenerCheckOutsHoy(){return this.http.get(`${this.apiUrl}/checkouts-hoy`)}obtenerTodosCheckIns(){return this.http.get(`${this.apiUrl}/checkins-todos`)}obtenerTodosCheckOuts(){return this.http.get(`${this.apiUrl}/checkouts-todos`)}};c.\u0275fac=function(i){return new(i||c)(E(w))},c.\u0275prov=S({token:c,factory:c.\u0275fac,providedIn:"root"});let s=c;return s})();function fe(s,c){if(s&1){let a=v();e(0,"ion-item",6),m("click",function(){p(a);let i=d(3);return h(i.navegarA("/reservas"))}),e(1,"ion-label")(2,"h3"),o(3),n(),e(4,"p"),o(5),n(),e(6,"p"),o(7),n()(),e(8,"ion-badge",50),o(9),n()()}if(s&2){let a=c.$implicit,t=d(3);r(3),g(a.codigoReserva),r(2),_("Depto: ",t.getNumeroDepartamento(a)),r(2),_("Fecha: ",t.formatearFecha(a.fechaInicio)),r(),u("color",a.checkIn.realizado?"success":a.estado==="confirmada"?"warning":"primary"),r(),_(" ",a.checkIn.realizado?"Realizado":a.estado==="confirmada"?"Pendiente":"En Curso"," ")}}function xe(s,c){if(s&1&&(e(0,"ion-list"),x(1,fe,10,5,"ion-item",49),n()),s&2){let a=d(2);r(),u("ngForOf",a.todosCheckIns)}}function be(s,c){s&1&&(e(0,"p",51),o(1,"No hay check-ins programados"),n())}function ve(s,c){if(s&1){let a=v();e(0,"ion-item",6),m("click",function(){p(a);let i=d(3);return h(i.navegarA("/reservas"))}),e(1,"ion-label")(2,"h3"),o(3),n(),e(4,"p"),o(5),n(),e(6,"p"),o(7),n()(),e(8,"ion-badge",50),o(9),n()()}if(s&2){let a=c.$implicit,t=d(3);r(3),g(a.codigoReserva),r(2),_("Depto: ",t.getNumeroDepartamento(a)),r(2),_("Fecha: ",t.formatearFecha(a.fechaFin)),r(),u("color",a.checkOut.realizado?"success":a.estado==="en-curso"?"warning":"medium"),r(),_(" ",a.checkOut.realizado?"Realizado":a.estado==="en-curso"?"Pendiente":"Completada"," ")}}function Ce(s,c){if(s&1&&(e(0,"ion-list"),x(1,ve,10,5,"ion-item",49),n()),s&2){let a=d(2);r(),u("ngForOf",a.todosCheckOuts)}}function ke(s,c){s&1&&(e(0,"p",51),o(1,"No hay check-outs programados"),n())}function Ie(s,c){if(s&1){let a=v();e(0,"ion-grid")(1,"ion-row")(2,"ion-col",14)(3,"ion-card",15),m("click",function(){p(a);let i=d();return h(i.navegarA("/reservas"))}),e(4,"ion-card-content")(5,"div",16),l(6,"ion-icon",17),n(),e(7,"div",18)(8,"h2"),o(9),n(),e(10,"p"),o(11,"Reservas Activas"),n(),e(12,"small"),o(13),n()()()()(),e(14,"ion-col",14)(15,"ion-card",19),m("click",function(){p(a);let i=d();return h(i.navegarA("/departamentos"))}),e(16,"ion-card-content")(17,"div",16),l(18,"ion-icon",20),n(),e(19,"div",18)(20,"h2"),o(21),n(),e(22,"p"),o(23,"Departamentos Disponibles"),n(),e(24,"small"),o(25),n()()()()(),e(26,"ion-col",14)(27,"ion-card",21),m("click",function(){p(a);let i=d();return h(i.navegarA("/facturas"))}),e(28,"ion-card-content")(29,"div",16),l(30,"ion-icon",22),n(),e(31,"div",18)(32,"h2"),o(33),n(),e(34,"p"),o(35,"Ingresos del Mes"),n(),e(36,"small"),o(37),n()()()()(),e(38,"ion-col",14)(39,"ion-card",23)(40,"ion-card-content")(41,"div",16),l(42,"ion-icon",24),n(),e(43,"div",18)(44,"h2"),o(45),n(),e(46,"p"),o(47,"Tasa de Ocupaci\xF3n"),n(),e(48,"small"),o(49,"Del mes actual"),n()()()()()(),e(50,"ion-row")(51,"ion-col",25)(52,"ion-card")(53,"ion-card-header")(54,"ion-card-title"),o(55,"Estado de Departamentos"),n()(),e(56,"ion-card-content")(57,"ion-list")(58,"ion-item"),l(59,"ion-icon",26),e(60,"ion-label"),o(61,"Disponibles"),n(),e(62,"ion-badge",27),o(63),n()(),e(64,"ion-item"),l(65,"ion-icon",28),e(66,"ion-label"),o(67,"Ocupados"),n(),e(68,"ion-badge",29),o(69),n()(),e(70,"ion-item"),l(71,"ion-icon",30),e(72,"ion-label"),o(73,"Mantenimiento"),n(),e(74,"ion-badge",31),o(75),n()()()()()(),e(76,"ion-col",25)(77,"ion-card")(78,"ion-card-header")(79,"ion-card-title"),o(80,"Clientes"),n()(),e(81,"ion-card-content")(82,"ion-list")(83,"ion-item"),l(84,"ion-icon",32),e(85,"ion-label"),o(86,"Total Clientes"),n(),e(87,"ion-badge",33),o(88),n()(),e(89,"ion-item"),l(90,"ion-icon",34),e(91,"ion-label"),o(92,"Clientes Frecuentes"),n(),e(93,"ion-badge",35),o(94),n()(),e(95,"ion-item"),l(96,"ion-icon",36),e(97,"ion-label"),o(98,"Usuarios Registrados"),n(),e(99,"ion-badge",37),o(100),n()()()()()()(),e(101,"ion-row")(102,"ion-col",25)(103,"ion-card")(104,"ion-card-header")(105,"ion-card-title"),o(106),n()(),e(107,"ion-card-content"),x(108,xe,2,1,"ion-list",38)(109,be,2,0,"ng-template",null,0,k),n()()(),e(111,"ion-col",25)(112,"ion-card")(113,"ion-card-header")(114,"ion-card-title"),o(115),n()(),e(116,"ion-card-content"),x(117,Ce,2,1,"ion-list",38)(118,ke,2,0,"ng-template",null,1,k),n()()()(),e(120,"ion-row")(121,"ion-col",39)(122,"ion-card")(123,"ion-card-header")(124,"ion-card-title"),o(125,"Accesos R\xE1pidos"),n()(),e(126,"ion-card-content")(127,"ion-grid")(128,"ion-row")(129,"ion-col",40)(130,"ion-button",41),m("click",function(){p(a);let i=d();return h(i.navegarA("/reservas/crear"))}),l(131,"ion-icon",42),o(132," Nueva Reserva "),n()(),e(133,"ion-col",40)(134,"ion-button",43),m("click",function(){p(a);let i=d();return h(i.navegarA("/departamentos"))}),l(135,"ion-icon",44),o(136," Departamentos "),n()(),e(137,"ion-col",40)(138,"ion-button",45),m("click",function(){p(a);let i=d();return h(i.navegarA("/reportes"))}),l(139,"ion-icon",46),o(140," Reportes "),n()(),e(141,"ion-col",40)(142,"ion-button",47),m("click",function(){p(a);let i=d();return h(i.navegarA("/logs"))}),l(143,"ion-icon",48),o(144," Logs "),n()()()()()()()()()}if(s&2){let a=C(110),t=C(119),i=d();r(9),g(i.estadisticas.reservas.activas),r(4),_("",i.estadisticas.reservas.total," totales"),r(8),g(i.estadisticas.departamentos.disponibles),r(4),_("",i.estadisticas.departamentos.total," totales"),r(8),g(i.formatearMoneda(i.estadisticas.finanzas.ingresosMes)),r(4),_("",i.formatearMoneda(i.estadisticas.finanzas.ingresosTotales)," totales"),r(8),_("",i.estadisticas.tasaOcupacion,"%"),r(18),g(i.estadisticas.departamentos.disponibles),r(6),g(i.estadisticas.departamentos.ocupados),r(6),g(i.estadisticas.departamentos.mantenimiento),r(13),g(i.estadisticas.usuarios.clientes),r(6),g(i.estadisticas.usuarios.frecuentes),r(6),g(i.estadisticas.usuarios.total),r(6),_("Check-ins Programados (",i.todosCheckIns.length,")"),r(2),u("ngIf",i.todosCheckIns.length>0)("ngIfElse",a),r(7),_("Check-outs Programados (",i.todosCheckOuts.length,")"),r(2),u("ngIf",i.todosCheckOuts.length>0)("ngIfElse",t)}}function Se(s,c){s&1&&(e(0,"div",52),l(1,"ion-spinner",53),e(2,"p"),o(3,"Cargando estad\xEDsticas..."),n()())}var Re=(()=>{let c=class c{constructor(t,i,f){this.dashboardService=t,this.authService=i,this.router=f,this.estadisticas=null,this.checkInsHoy=[],this.checkOutsHoy=[],this.todosCheckIns=[],this.todosCheckOuts=[],this.mostrarTodos=!0,this.loading=!0,ne({peopleOutline:me,bedOutline:re,cashOutline:ce,statsChartOutline:_e,calendarOutline:se,logOutOutline:de,arrowUpOutline:ae,arrowDownOutline:oe,checkmarkCircleOutline:le,alertCircleOutline:ie})}ngOnInit(){this.cargarDatos()}cargarDatos(){this.loading=!0,this.dashboardService.obtenerEstadisticas().subscribe({next:t=>{t.success&&t.data&&(this.estadisticas=t.data)},error:t=>console.error("Error al cargar estad\xEDsticas",t)}),this.dashboardService.obtenerCheckInsHoy().subscribe({next:t=>{t.success&&t.data&&(this.checkInsHoy=t.data)},error:t=>console.error("Error al cargar check-ins",t)}),this.dashboardService.obtenerCheckOutsHoy().subscribe({next:t=>{t.success&&t.data&&(this.checkOutsHoy=t.data)},error:t=>console.error("Error al cargar check-outs",t)}),this.dashboardService.obtenerTodosCheckIns().subscribe({next:t=>{t.success&&t.data&&(this.todosCheckIns=t.data)},error:t=>console.error("Error al cargar todos los check-ins",t)}),this.dashboardService.obtenerTodosCheckOuts().subscribe({next:t=>{t.success&&t.data&&(this.todosCheckOuts=t.data),this.loading=!1},error:t=>{console.error("Error al cargar todos los check-outs",t),this.loading=!1}})}handleRefresh(t){this.cargarDatos(),setTimeout(()=>{t.target.complete()},1e3)}formatearMoneda(t){return`$${t.toFixed(2)}`}formatearFecha(t){return t?new Date(t).toLocaleDateString("es-EC",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A"}getNumeroDepartamento(t){return typeof t.departamento=="object"&&t.departamento!==null&&t.departamento.numero||"N/A"}logout(){this.authService.logout(),this.router.navigate(["/login"])}navegarA(t){this.router.navigate([t])}};c.\u0275fac=function(i){return new(i||c)(b(ge),b(te),b(M))},c.\u0275cmp=O({type:c,selectors:[["app-dashboard"]],decls:17,vars:4,consts:[["noCheckIns",""],["noCheckOuts",""],[3,"translucent"],["color","primary"],["slot","start"],["slot","end"],[3,"click"],["name","person-outline"],["name","log-out-outline"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"dashboard-container","ion-padding"],[4,"ngIf"],["class","loading-container ion-text-center ion-padding",4,"ngIf"],["size","12","size-md","6","size-lg","3"],[1,"stat-card","reservas-card",3,"click"],[1,"stat-icon"],["name","calendar-outline"],[1,"stat-info"],[1,"stat-card","departamentos-card",3,"click"],["name","bed-outline"],[1,"stat-card","ingresos-card",3,"click"],["name","cash-outline"],[1,"stat-card","ocupacion-card"],["name","stats-chart-outline"],["size","12","size-lg","6"],["name","checkmark-circle-outline","color","success","slot","start"],["color","success","slot","end"],["name","bed-outline","color","warning","slot","start"],["color","warning","slot","end"],["name","alert-circle-outline","color","danger","slot","start"],["color","danger","slot","end"],["name","people-outline","color","primary","slot","start"],["color","primary","slot","end"],["name","star-outline","color","tertiary","slot","start"],["color","tertiary","slot","end"],["name","person-outline","color","medium","slot","start"],["color","medium","slot","end"],[4,"ngIf","ngIfElse"],["size","12"],["size","6","size-md","3"],["expand","block",3,"click"],["name","add-outline","slot","start"],["expand","block","color","secondary",3,"click"],["name","bed-outline","slot","start"],["expand","block","color","tertiary",3,"click"],["name","document-text-outline","slot","start"],["expand","block","color","dark",3,"click"],["name","list-outline","slot","start"],[3,"click",4,"ngFor","ngForOf"],["slot","end",3,"color"],[1,"ion-text-center","ion-padding"],[1,"loading-container","ion-text-center","ion-padding"],["name","crescent"]],template:function(i,f){i&1&&(e(0,"ion-header",2)(1,"ion-toolbar",3)(2,"ion-buttons",4),l(3,"ion-menu-button"),n(),e(4,"ion-title"),o(5,"Dashboard - Para\xEDso Verde"),n(),e(6,"ion-buttons",5)(7,"ion-button",6),m("click",function(){return f.navegarA("/perfil")}),l(8,"ion-icon",7),n(),e(9,"ion-button",6),m("click",function(){return f.logout()}),l(10,"ion-icon",8),n()()()(),e(11,"ion-content",9)(12,"ion-refresher",10),m("ionRefresh",function(ue){return f.handleRefresh(ue)}),l(13,"ion-refresher-content"),n(),e(14,"div",11),x(15,Ie,145,19,"ion-grid",12)(16,Se,4,0,"div",13),n()()),i&2&&(u("translucent",!0),r(11),u("fullscreen",!0),r(4),u("ngIf",f.estadisticas),r(),u("ngIf",f.loading))},dependencies:[D,P,y,$,j,W,X,R,V,Z,z,F,H,A,U,K,N,G,B,L,T,Y,q,J,Q],styles:[".dashboard-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}.stat-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.stat-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.5rem}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:3rem;opacity:.8}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{flex:1}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin:0}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0;font-weight:500}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{opacity:.7;font-size:.8rem}.reservas-card[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:#fff}.departamentos-card[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);color:#fff}.ingresos-card[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);color:#fff}.ocupacion-card[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);color:#fff}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px}.loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-bottom:1rem}"]});let s=c;return s})();export{Re as DashboardPage};
